# G-04 Last Best Reference

> **Phase:** 1.0 | **Status:** Not Started
> **Specs:** [API &sect;5.7, &sect;5.8](../specs/5-api-design.md) &middot; [Data](../specs/6-data-model.md)

## Goal Statement

訓練中可即時看到同動作上次與最佳紀錄，幫助決策。

## Requirement

系統必須提供 `last` 與 `best` 查詢能力。

## In Scope

1. Last：最近一次完成 session
2. Best：最大重量優先，依 tie-break 規則排序
3. 訓練頁顯示查詢結果

## Out Scope

1. 自動建議訓練課表
2. AI 負重推薦

## Frontend Elements

1. 訓練頁動作卡片的 `last/best` 區塊
2. 歷史紀錄摘要 popover
3. `best` 規則說明 tooltip

## Acceptance Criteria

- [ ] Given 使用者有歷史紀錄，When 開啟訓練頁某動作，Then 顯示 `last` 與 `best`。
- [ ] Given 多筆同重量紀錄，When 計算 best，Then 依 reps 與時間套用 tie-break。

## Tasks

- [ ] exercise_session_metrics 寫入（session finish 時計算）
- [ ] Last/best query API
- [ ] 訓練頁 last/best 前端顯示
