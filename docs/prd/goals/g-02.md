# G-02 Template Versioning

> **Phase:** 1.0 | **Status:** Not Started
> **Specs:** [API &sect;5.3, &sect;5.4, &sect;5.6](../specs/5-api-design.md) &middot; [Data](../specs/6-data-model.md)

## Goal Statement

使用者與 crew 成員可安全編輯訓練 template，且保留完整歷史。

## Requirement

系統必須提供 template CRUD 與 append-only 版本快照。

## In Scope

1. Template CRUD
2. Crew 共編 template
3. 每次編輯建立新版本

## Out Scope

1. Template merge UI
2. 跨版本自動衝突解決

## Frontend Elements

1. Template 編輯頁（動作清單與編輯器）
2. 版本歷史面板（version list）
3. Crew 共編狀態區塊（成員與權限提示）
4. 自訂動作建立彈窗（含圖片上傳狀態）

## Acceptance Criteria

- [ ] Given 同一份 template 被更新，When 儲存成功，Then 產生新 version，不覆蓋舊版。
- [ ] Given crew 成員有權限，When 編輯 template，Then 變更可被其他成員讀取。
- [ ] Given 使用者建立自訂動作並上傳圖片，When pre-signed upload + complete 成功，Then 該動作可加入 template 並被保存。
- [ ] Given template 分享到 crew，When 任一成員編輯後儲存，Then 版本歷史需保留編輯者資訊。

## Tasks

- [ ] Template CRUD API + DB migration
- [ ] Template versioning（append-only snapshot）
- [ ] Media upload（pre-signed URL + complete）
- [ ] Custom exercise 建立 + 綁定 template
- [ ] Crew 共編 template（share + permission check）
- [ ] Template 前端頁面（編輯器 + 版本歷史）
